<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>maturity-index: Microbial maturity index prediction. &#8212; QIIME 2 2019.1.0 documentation</title>
    
    <link rel="stylesheet" href="../../../../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '2019.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../../_static/external-links.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="author" title="About these documents" href="../../../../about/" />
    <link rel="top" title="QIIME 2 2019.1.0 documentation" href="../../../../" />
    <link rel="up" title="longitudinal" href="../" />
    <link rel="next" title="first-differences: Compute first differences or difference from baseline between sequential states" href="../first-differences/" />
    <link rel="prev" title="feature-volatility: Feature volatility analysis" href="../feature-volatility/" />
  <script src="../../../../_static/bootstrap.min.js"></script>
  <script src="../../../../_static/clipboard.min.js"></script>
  <link rel="icon" href="../../../../_static/favicon.ico" type="image/png" />
  <link rel="stylesheet" href="../../../../_static/css/bootstrap.min.css" media="screen" />
  <link rel="stylesheet" href="../../../../_static/css/normalize.css" media="screen">
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-86671044-2', 'auto');
    ga('send', 'pageview');
  </script>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  </head>
  <body role="document">
<a href="https://github.com/qiime2/qiime2" id="github-banner">
  <img
    src="../../../../_static/github_banner.png"
    alt="Fork me on GitHub"
  />
</a>

  <div id="wrapper" class="container clearfix">
    <div id="header">
      <a href="/">
        <img
          class="img-responsive"
          src="../../../../_static/q2docs.png" alt="QIIME 2 Docs"
        />
      </a>
    </div>
    <div id="content">
      
      <div id="body" class="col-lg-10 col-md-10 col-sm-12 col-xs-12 main pull-right">
        
  <div class="section" id="maturity-index-microbial-maturity-index-prediction">
<h1>maturity-index: Microbial maturity index prediction.<a class="headerlink" href="#maturity-index-microbial-maturity-index-prediction" title="Permalink to this headline">Â¶</a></h1>
<table class="table action-info">
  <tbody>
    <tr>
      <th scope="row"><p></p>Citations</th>
      <td><p id="bibtex-bibliography-plugins/available/longitudinal/maturity-index-0"><table class="docutils citation" frame="void" id="longitudinal-maturity-index-key1" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[longitudinal:maturity-index:BDB+18]</td><td>Nicholas Bokulich, Matthew Dillon, Evan Bolyen, Benjamin&nbsp;D Kaehler, Gavin&nbsp;A Huttley, and J&nbsp;Gregory Caporaso. Q2-sample-classifier: machine-learning tools for microbiome classification and regression. <em>Journal of Open Source Software</em>, 3(30):934, 2018. <a class="reference external" href="https://doi.org/10.21105/joss.00934">doi:10.21105/joss.00934</a>.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="longitudinal-maturity-index-key0" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[longitudinal:maturity-index:SHY+14]</td><td>Sathish Subramanian, Sayeeda Huq, Tanya Yatsunenko, Rashidul Haque, Mustafa Mahfuz, Mohammed&nbsp;A Alam, Amber Benezra, Joseph DeStefano, Martin&nbsp;F Meier, Brian&nbsp;D Muegge, Michael&nbsp;J Barratt, Laura&nbsp;G VanArendonk, Qunyuan Zhang, Michael&nbsp;A Province, William&nbsp;A Petri, Tahmeed Ahmed, and Jeffrey&nbsp;I Gordon. Persistent gut microbiota immaturity in malnourished bangladeshi children. <em>Nature</em>, 510(7505):417, 2014. <a class="reference external" href="https://doi.org/10.1038/nature13421">doi:10.1038/nature13421</a>.</td></tr>
</tbody>
</table>
</p>
      </td>
    </tr>
  </tbody>
</table><div class="tabbed">
  <ul class="nav nav-tabs">
    <li class="active"><a data-toggle="tab" href="#cli">Command line interface</a></li>
    <li><a data-toggle="tab" href="#api">Artifact API</a></li>
  </ul>
  <div class="tab-content">
    <div id="cli" class="tab-pane fade in active">
      <h4>Docstring:</h4>
      <pre>Usage: qiime longitudinal maturity-index [OPTIONS]

  Calculates a "microbial maturity" index from a regression model trained on
  feature data to predict a given continuous metadata column, e.g., to
  predict age as a function of microbiota composition. The model is trained
  on a subset of control group samples, then predicts the column value for
  all samples. This visualization computes maturity index z-scores to
  compare relative "maturity" between each group, as described in
  doi:10.1038/nature13421. This method can be used to predict between-group
  differences in relative trajectory across any type of continuous metadata
  gradient, e.g., intestinal microbiome development by age, microbial
  succession during wine fermentation, or microbial community differences
  along environmental gradients, as a function of two or more different
  "treatment" groups.

Options:
  --i-table ARTIFACT PATH FeatureTable[Frequency]
                                  Feature table containing all features that
                                  should be used for target prediction.
                                  [required]
  --m-metadata-file MULTIPLE FILE
                                  Metadata file or artifact viewable as
                                  metadata. This option may be supplied
                                  multiple times to merge metadata.
                                  [required]
  --p-state-column TEXT           Numeric metadata column containing sampling
                                  time (state) data to use as prediction
                                  target.  [required]
  --p-group-by TEXT               Categorical metadata column to use for
                                  plotting and significance testing between
                                  main treatment groups.  [required]
  --p-control TEXT                Value of group_by to use as control group.
                                  The regression model will be trained using
                                  only control group data, and the maturity
                                  scores of other groups consequently will be
                                  assessed relative to this group.  [required]
  --p-individual-id-column TEXT   Optional metadata column containing IDs for
                                  individual subjects. Adds individual subject
                                  (spaghetti) vectors to volatility charts if
                                  a column name is provided.  [optional]
  --p-estimator [ExtraTreesRegressor|Lasso|KNeighborsRegressor|SVR|RandomForestRegressor|GradientBoostingRegressor|LinearSVR|ElasticNet|AdaBoostRegressor|Ridge]
                                  Regression model to use for prediction.
                                  [default: RandomForestRegressor]
  --p-n-estimators INTEGER RANGE  Number of trees to grow for estimation. More
                                  trees will improve predictive accuracy up to
                                  a threshold level, but will also increase
                                  time and memory requirements. This parameter
                                  only affects ensemble estimators, such as
                                  Random Forest, AdaBoost, ExtraTrees, and
                                  GradientBoosting.  [default: 100]
  --p-test-size FLOAT             Fraction of input samples to exclude from
                                  training set and use for classifier testing.
                                  [default: 0.5]
  --p-step FLOAT                  If optimize_feature_selection is True, step
                                  is the percentage of features to remove at
                                  each iteration.  [default: 0.05]
  --p-cv INTEGER RANGE            Number of k-fold cross-validations to
                                  perform.  [default: 5]
  --p-random-state INTEGER        Seed used by random number generator.
                                  [optional]
  --p-n-jobs INTEGER              Number of jobs to run in parallel.
                                  [default: 1]
  --p-parameter-tuning / --p-no-parameter-tuning
                                  Automatically tune hyperparameters using
                                  random grid search.  [default: False]
  --p-optimize-feature-selection / --p-no-optimize-feature-selection
                                  Automatically optimize input feature
                                  selection using recursive feature
                                  elimination.  [default: False]
  --p-stratify / --p-no-stratify  Evenly stratify training and test data among
                                  metadata categories. If True, all values in
                                  column must match at least two samples.
                                  [default: False]
  --p-missing-samples [ignore|error]
                                  How to handle missing samples in metadata.
                                  "error" will fail if missing samples are
                                  detected. "ignore" will cause the feature
                                  table and metadata to be filtered, so that
                                  only samples found in both files are
                                  retained.  [default: error]
  --o-sample-estimator ARTIFACT PATH SampleEstimator[Regressor]
                                  Trained sample estimator.  [required if not
                                  passing --output-dir]
  --o-feature-importance ARTIFACT PATH FeatureData[Importance]
                                  Importance of each input feature to model
                                  accuracy.  [required if not passing
                                  --output-dir]
  --o-predictions ARTIFACT PATH SampleData[RegressorPredictions]
                                  Predicted target values for each input
                                  sample.  [required if not passing --output-
                                  dir]
  --o-model-summary VISUALIZATION PATH
                                  Summarized parameter and (if enabled)
                                  feature selection information for the
                                  trained estimator.  [required if not passing
                                  --output-dir]
  --o-accuracy-results VISUALIZATION PATH
                                  Accuracy results visualization.  [required
                                  if not passing --output-dir]
  --o-maz-scores ARTIFACT PATH SampleData[RegressorPredictions]
                                  Microbiota-for-age z-score predictions.
                                  [required if not passing --output-dir]
  --o-clustermap VISUALIZATION PATH
                                  Heatmap of important feature abundance at
                                  each time point in each group.  [required if
                                  not passing --output-dir]
  --o-volatility-plots VISUALIZATION PATH
                                  Interactive volatility plots of MAZ and
                                  maturity scores, target (column)
                                  predictions, and the sample metadata.
                                  [required if not passing --output-dir]
  --output-dir DIRECTORY          Output unspecified results to a directory
  --cmd-config FILE               Use config file for command options
  --verbose                       Display verbose output to stdout and/or
                                  stderr during execution of this action.
                                  [default: False]
  --quiet                         Silence output if execution is successful
                                  (silence is golden).  [default: False]
  --citations                     Show citations and exit.
  --help                          Show this message and exit.</pre>
    </div>
    <div id="api" class="tab-pane fade">
    <h4>Import:</h4><div class="highlight-shell"><div class="highlight"><pre><span></span>from qiime2.plugins.longitudinal.pipelines import maturity_index
</pre></div>
</div>
    <h4>Docstring:</h4>
      <pre>Microbial maturity index prediction.

Calculates a "microbial maturity" index from a regression model trained on
feature data to predict a given continuous metadata column, e.g., to
predict age as a function of microbiota composition. The model is trained
on a subset of control group samples, then predicts the column value for
all samples. This visualization computes maturity index z-scores to compare
relative "maturity" between each group, as described in
doi:10.1038/nature13421. This method can be used to predict between-group
differences in relative trajectory across any type of continuous metadata
gradient, e.g., intestinal microbiome development by age, microbial
succession during wine fermentation, or microbial community differences
along environmental gradients, as a function of two or more different
"treatment" groups.

Parameters
----------
table : FeatureTable[Frequency]
    Feature table containing all features that should be used for target
    prediction.
metadata : Metadata
state_column : Str
    Numeric metadata column containing sampling time (state) data to use as
    prediction target.
group_by : Str
    Categorical metadata column to use for plotting and significance
    testing between main treatment groups.
control : Str
    Value of group_by to use as control group. The regression model will be
    trained using only control group data, and the maturity scores of other
    groups consequently will be assessed relative to this group.
individual_id_column : Str, optional
    Optional metadata column containing IDs for individual subjects. Adds
    individual subject (spaghetti) vectors to volatility charts if a column
    name is provided.
estimator : Str % Choices({'AdaBoostRegressor', 'ElasticNet', 'ExtraTreesRegressor', 'GradientBoostingRegressor', 'KNeighborsRegressor', 'Lasso', 'LinearSVR', 'RandomForestRegressor', 'Ridge', 'SVR'}), optional
    Regression model to use for prediction.
n_estimators : Int % Range(1, None), optional
    Number of trees to grow for estimation. More trees will improve
    predictive accuracy up to a threshold level, but will also increase
    time and memory requirements. This parameter only affects ensemble
    estimators, such as Random Forest, AdaBoost, ExtraTrees, and
    GradientBoosting.
test_size : Float % Range(0.0, 1.0, inclusive_start=False), optional
    Fraction of input samples to exclude from training set and use for
    classifier testing.
step : Float % Range(0.0, 1.0, inclusive_start=False), optional
    If optimize_feature_selection is True, step is the percentage of
    features to remove at each iteration.
cv : Int % Range(1, None), optional
    Number of k-fold cross-validations to perform.
random_state : Int, optional
    Seed used by random number generator.
n_jobs : Int, optional
    Number of jobs to run in parallel.
parameter_tuning : Bool, optional
    Automatically tune hyperparameters using random grid search.
optimize_feature_selection : Bool, optional
    Automatically optimize input feature selection using recursive feature
    elimination.
stratify : Bool, optional
    Evenly stratify training and test data among metadata categories. If
    True, all values in column must match at least two samples.
missing_samples : Str % Choices({'error', 'ignore'}), optional
    How to handle missing samples in metadata. "error" will fail if missing
    samples are detected. "ignore" will cause the feature table and
    metadata to be filtered, so that only samples found in both files are
    retained.

Returns
-------
sample_estimator : SampleEstimator[Regressor]
    Trained sample estimator.
feature_importance : FeatureData[Importance]
    Importance of each input feature to model accuracy.
predictions : SampleData[RegressorPredictions]
    Predicted target values for each input sample.
model_summary : Visualization
    Summarized parameter and (if enabled) feature selection information for
    the trained estimator.
accuracy_results : Visualization
    Accuracy results visualization.
maz_scores : SampleData[RegressorPredictions]
    Microbiota-for-age z-score predictions.
clustermap : Visualization
    Heatmap of important feature abundance at each time point in each
    group.
volatility_plots : Visualization
    Interactive volatility plots of MAZ and maturity scores, target
    (column) predictions, and the sample metadata.</pre>
    </div>
  </div>
</div></div>


      </div>
      

      
      <div id="sidebar" class="col-lg-2 col-md-2 col-sm-12 col-xs-12 side pull-left">
        <div id="version-div" class="btn-group">
          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></button>
          <ul id="version-list" class="dropdown-menu"></ul>
        </div>
        
<h3><a href="../../../../">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../getting-started/">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../about/">What is QIIME 2?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../concepts/">Core concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../install/">Installing QIIME 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tutorials/">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../interfaces/">Interfaces</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../">Plugins</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../">Available plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../future/">Future plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../developing/">Developing a QIIME 2 plugin</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../semantic-types/">Semantic types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../community/">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../data-resources/">Data resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../supplementary-resources/">Supplementary resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../glossary/">Glossary</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../../search/" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
      </div>
      
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2016-2018, QIIME 2 development team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.6.
    </div>
  </div>
  <script src="../../../../_static/bootstrap-dropdown.js" charset="utf-8"></script>
  <script src="../../../../_static/clipboard-driver.js"></script>
  <script src="/versions.js" charset="utf-8"></script>
  </body>
</html>